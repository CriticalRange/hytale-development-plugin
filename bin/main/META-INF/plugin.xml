<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <id>com.criticalrange.hytaledev</id>
    <name>Hytale Development</name>
    <vendor email="criticalrange@proton.me" url="https://github.com/criticalrange">CriticalRange</vendor>

    <description><![CDATA[
    Modding plugin for Hytale with code navigation, API completion, and project templates.

    <b>Features:</b>
    <ul>
        <li>Navigate to Hytale API source code with Ctrl+Click</li>
        <li>Plugin manifest (manifest.json) support with JSON schema</li>
        <li>Auto-detection of HytaleServer.jar from Flatpak installation</li>
        <li>Hytale facet for project configuration</li>
        <li>Code completion for Hytale API</li>
    </ul>
    ]]></description>

    <!-- Required dependencies -->
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.java</depends>
    <depends>ByteCodeViewer</depends>
    <depends>com.intellij.modules.json</depends>

    <resource-bundle>messages.HytaleBundle</resource-bundle>

    <extensions defaultExtensionNs="com.intellij">
        <!-- Startup Activity - Initialize plugin on project open -->
        <postStartupActivity implementation="com.criticalrange.hytaledev.startup.HytaleProjectActivity"/>

        <!-- Facet Detection - Auto-detect Hytale projects -->
        <postStartupActivity implementation="com.criticalrange.hytaledev.facet.HytaleFacetDetector"/>

        <!-- Facet Type - Hytale development facet -->
        <facetType implementation="com.criticalrange.hytaledev.facet.HytaleFacetType"/>

        <!-- Library Detection - Recognize HytaleServer.jar -->
        <library.presentationProvider implementation="com.criticalrange.hytaledev.library.HytalePresentationProvider"/>

        <!-- Source Attachment - Decompilation support -->
        <attachSourcesProvider implementation="com.criticalrange.hytaledev.source.HytaleAttachSourcesProvider"/>

        <!-- Navigation - Ctrl+Click on Hytale API classes -->
        <gotoDeclarationHandler implementation="com.criticalrange.hytaledev.navigation.HytaleGotoDeclarationHandler"
                                order="first"/>

        <!-- Line Markers - Gutter icons for plugin classes -->
        <codeInsight.lineMarkerProvider language="JAVA"
                                        implementationClass="com.criticalrange.hytaledev.insight.PluginLineMarkerProvider"/>

        <!-- JSON Reference - Navigate from manifest.json to classes -->
        <psi.referenceContributor language="JSON"
                                  implementation="com.criticalrange.hytaledev.manifest.ManifestJsonReferenceContributor"/>

        <!-- JSON Schema - Validation and completion for manifest.json -->
        <json.jsonSchemaProviderFactory
                implementation="com.criticalrange.hytaledev.manifest.ManifestJsonSchemaProviderFactory"/>

        <!-- Project Service -->
        <projectService serviceImplementation="com.criticalrange.hytaledev.services.HytaleProjectService"/>

        <!-- Library Manager Service -->
        <projectService serviceImplementation="com.criticalrange.hytaledev.library.HytaleLibraryManager"/>
        <!-- Notification Group -->
        <notificationGroup id="Hytale Development"
                           displayType="BALLOON"
                           key="notification.group.name"/>

        <!-- Inspections -->
        <localInspection language="JSON"
                         groupName="Hytale"
                         displayName="Main class validation"
                         shortName="HytaleManifestMainClass"
                         enabledByDefault="true"
                         level="ERROR"
                         implementationClass="com.criticalrange.hytaledev.inspection.ManifestMainClassInspection"/>

        <localInspection language="JSON"
                         groupName="Hytale"
                         displayName="Required fields validation"
                         shortName="HytaleManifestRequiredFields"
                         enabledByDefault="true"
                         level="ERROR"
                         implementationClass="com.criticalrange.hytaledev.inspection.ManifestRequiredFieldsInspection"/>

        <localInspection language="JAVA"
                         groupName="Hytale"
                         displayName="Plugin class structure"
                         shortName="HytalePluginClass"
                         enabledByDefault="true"
                         level="WARNING"
                         implementationClass="com.criticalrange.hytaledev.inspection.PluginClassInspection"/>

        <!-- Dependency Support - IDE will suggest this plugin when Hytale dependencies are detected -->
        <dependencySupport kind="java"
                           coordinate="com.hypixel.hytale:*"
                           displayName="Hytale Server API"/>
    </extensions>
</idea-plugin>
